---
title: 'Authentication'
description: 'Learn how to authenticate with the Vellosim API'
icon: 'key'
---

## Overview

The Vellosim API uses **Bearer Token Authentication** to secure all API endpoints. You'll need to include your API key in the Authorization header of every request.

## Getting Your API Key

### Step 1: Create an Account

If you don't have a Vellosim account yet:
1. Sign up at [vellosim.com](https://vellosim.com)
2. Complete email verification
3. Log in to your dashboard

### Step 2: Generate API Key

<Steps>
  <Step title="Navigate to Developer Settings">
    Go to **Settings** → **Developer** → **API Keys**
  </Step>
  
  <Step title="Provide Required Information">
    Fill in the following details:
    - **Company Name:** Your business or organization name
    - **Website URL:** Your website (must be accessible)
    - **Whitelisted IPs:** IP addresses allowed to use this API key
    - **Webhook URL** (Optional): URL to receive event notifications
  </Step>
  
  <Step title="Generate Key">
    Click **Generate API Key** button
  </Step>
  
  <Step title="Save Your Key">
    Copy and securely store your API key. You won't be able to see it again!
  </Step>
</Steps>

<Warning>
  **Important:** Your API key is displayed only once. Store it securely in your environment variables or secrets manager.
</Warning>

## Using Your API Key

Include your API key in the `Authorization` header using the Bearer scheme:

```bash
Authorization: Bearer vls_live_1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
```

### Example Request

<CodeGroup>

```bash cURL
curl https://api.vellosim.com/api/wallet/balance \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch('https://api.vellosim.com/api/wallet/balance', {
  method: 'GET',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  }
});

const data = await response.json();
console.log(data);
```

```python Python
import requests

headers = {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
}

response = requests.get(
    'https://api.vellosim.com/api/wallet/balance',
    headers=headers
)

data = response.json()
print(data)
```

```php PHP
<?php
$apiKey = 'YOUR_API_KEY';

$ch = curl_init('https://api.vellosim.com/api/wallet/balance');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Authorization: Bearer ' . $apiKey,
    'Content-Type: application/json'
]);

$response = curl_exec($ch);
$data = json_decode($response, true);

curl_close($ch);
print_r($data);
?>
```

</CodeGroup>

## API Key Management

### Viewing API Key Details

```http
GET /api/developer/api-key
```

Returns your API key configuration (the actual key is not returned for security).

**Response:**
```json
{
  "_id": "507f1f77bcf86cd799439011",
  "companyName": "Acme Corporation Ltd",
  "websiteUrl": "https://example.com",
  "whitelistIps": ["192.168.1.1", "10.0.0.1"],
  "webhookUrl": "https://example.com/webhooks/vellosim",
  "keyPrefix": "vls_live",
  "isActive": true,
  "lastUsedAt": "2024-01-15T10:30:00Z",
  "usageCount": 1250,
  "expiresAt": null,
  "createdAt": "2024-01-01T00:00:00Z"
}
```

### Regenerating API Key

```http
POST /api/developer/api-key/regenerate
```

Generates a new API key, invalidating the old one immediately.

<Warning>
  **This action cannot be undone!** Make sure you update your applications with the new key before regenerating.
</Warning>

**Response:**
```json
{
  "apiKey": "vls_live_newkey1234567890abcdef...",
  "keyPrefix": "vls_live",
  "warning": "Please save this API key. You will not be able to see it again.",
  "isActive": true,
  "createdAt": "2024-01-15T10:30:00Z"
}
```

### Update Whitelisted IPs

```http
PUT /api/developer/api-key/whitelist
```

**Request Body:**
```json
{
  "whitelistIps": [
    "192.168.1.1",
    "10.0.0.1",
    "2001:0db8:85a3:0000:0000:8a2e:0370:7334"
  ]
}
```

### Update Webhook URL

```http
PUT /api/developer/api-key/webhook
```

**Request Body:**
```json
{
  "webhookUrl": "https://example.com/webhooks/vellosim"
}
```

### Deactivate API Key

```http
DELETE /api/developer/api-key
```

Deactivates your current API key. You'll need to generate a new one to use the API again.

## IP Whitelisting

For enhanced security, all API keys support IP whitelisting. Only requests from whitelisted IP addresses will be accepted.

### Supported Formats

- **IPv4:** `192.168.1.1`, `10.0.0.1`
- **IPv6:** `2001:0db8:85a3:0000:0000:8a2e:0370:7334`
- **CIDR Notation:** `192.168.1.0/24`

### Limits

- Minimum: 1 IP address
- Maximum: 10 IP addresses per API key

<Tip>
  Add your production server IPs and testing environment IPs to ensure uninterrupted service.
</Tip>

## Security Best Practices

<AccordionGroup>
  <Accordion title="Store Keys Securely">
    - Use environment variables
    - Never commit keys to version control
    - Use a secrets manager (AWS Secrets Manager, HashiCorp Vault, etc.)
  </Accordion>

  <Accordion title="Rotate Keys Regularly">
    - Regenerate API keys periodically
    - Implement key rotation in your application
    - Update all services when rotating keys
  </Accordion>

  <Accordion title="Monitor Usage">
    - Regularly check API key usage statistics
    - Set up alerts for unusual activity
    - Review access logs periodically
  </Accordion>

  <Accordion title="Limit Access">
    - Use IP whitelisting
    - Only whitelist necessary IP addresses
    - Update whitelist when infrastructure changes
  </Accordion>
</AccordionGroup>

## Error Responses

### Invalid API Key

```json
{
  "success": false,
  "message": "Unauthorized",
  "error": {
    "code": "INVALID_API_KEY",
    "details": "The provided API key is invalid or has been revoked"
  }
}
```

**Status Code:** `401 Unauthorized`

### Missing API Key

```json
{
  "success": false,
  "message": "Unauthorized",
  "error": {
    "code": "MISSING_API_KEY",
    "details": "Authorization header is required"
  }
}
```

**Status Code:** `401 Unauthorized`

### IP Not Whitelisted

```json
{
  "success": false,
  "message": "Forbidden",
  "error": {
    "code": "IP_NOT_WHITELISTED",
    "details": "Your IP address is not authorized to use this API key"
  }
}
```

**Status Code:** `403 Forbidden`

## Testing Your Authentication

Use this simple test to verify your API key is working:

```bash
curl -X GET https://api.vellosim.com/api/wallet/balance \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json"
```

If successful, you'll receive your wallet balance. If not, check the error message for details.

## Next Steps

<CardGroup cols={2}>
  <Card title="Get Wallet Balance" icon="wallet" href="/api-reference/wallet/balance">
    Check your account balance
  </Card>
  <Card title="Browse eSIM Packages" icon="globe" href="/api-reference/esim/packages">
    View available eSIM packages
  </Card>
  <Card title="Purchase eSIM" icon="shopping-cart" href="/api-reference/esim/buy">
    Buy an eSIM package
  </Card>
  <Card title="Webhooks" icon="webhook" href="/guides/webhooks">
    Set up webhook notifications
  </Card>
</CardGroup>
